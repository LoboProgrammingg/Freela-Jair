{% extends 'base.html' %}
{% load l10n %} {% block content %}
    <header class="page-header">
        <h2 style="margin: 0;">Vendas (Saídas)</h2>
        <a href="{% url 'saida-create' %}" role="button">Adicionar Venda</a>
    </header>
    <hr>
    <table>
        <thead>
            <tr>
                <th scope="col">Nome da Venda</th>
                <th scope="col">Valor da Venda</th>
                <th scope="col">Lucro Bruto</th>
                <th scope="col">Margem</th>
                <th scope="col">Data</th>
                <th scope="col">Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for saida in saidas %}
            <tr>
                <td>{{ saida.nome }}</td>
                <td>R$ {{ saida.valor|localize }}</td>
                <td>R$ {{ saida.lucro_bruto|localize }}</td>
                <td>
                    {% if saida.custo_total_entradas > 0 %}
                        {{ saida.margem_lucro_percentual|floatformat:2|localize }}%
                    {% else %}
                        <span title="Custo foi zero, então o lucro é 100% do valor.">Puro Lucro</span>
                    {% endif %}
                </td>
                <td>{{ saida.data|date:"d/m/Y" }}</td>
                <td class="actions">
                    <a href="{% url 'gerar-recibo' saida.pk %}" target="_blank">Recibo</a>
                    <a href="{% url 'saida-update' saida.pk %}">Editar</a>
                    <a href="{% url 'saida-delete' saida.pk %}" style="color: #d32f2f;">Excluir</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6">Nenhuma venda cadastrada ainda.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}